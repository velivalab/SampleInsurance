name: CI

on: [push]

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Maven Build
      run: mvn clean install -DskipTests=true
    - name: Run Unit Tests
      run: mvn test -Dmaven.test.failure.ignore=true
    - name: Publish Unit Test Report
      uses: EnricoMi/publish-unit-test-result-action/composite@master
      with:
          commit: ${{ github.event.workflow_run.head_sha }}
          check_name: Unit Test Results (reference)
          event_file: artifacts/Event File/event.json
          event_name: ${{ github.event.workflow_run.event }}
          files: "artifacts/**/*.xml"
          log_level: DEBUG
